var userlistShown=!0;API.on(API.CHAT_COMMAND,function(a){a=a.toLowerCase();if("/tu"===a||"/toggleuserlist"===a||"/toggle userlist"===a)userlistShown?(userlistShown=!1,$("#reload-userlist").animate({left:"-250px"},800,function(){})):(userlistShown=!0,$("#reload-userlist").animate({left:"0px"},800,function(){}))});function initialize(){var a=$("<style>");a.attr("type","text/css").html("html,body{height:100%!important}div#reload-userlist{position:relative;background-color:#CCC;word-wrap:break-word;width:200px;height:99%;color:#333;-webkit-box-shadow:4px 4px 10px 0 rgba(0,0,0,0.6);box-shadow:4px 4px 10px 0 rgba(0,0,0,0.6)}div#userlistHeader{background-color:#BBB;width:100%;height:35px;font-family:CalgaryScript, Helvetica, Arial, sans-serif;font-size:25px;color:#222;-webkit-box-shadow:0 2px 10px 0 rgba(0,0,0,0.3);box-shadow:0 2px 10px 0 rgba(0,0,0,0.3);border-style:none;padding:0 0 0 8px}div#userlistDiv{width:100%;background-color:#BBB;overflow-y:scroll;word-wrap:break-word;-webkit-box-shadow:0 -2px 10px 0 rgba(0,0,0,0.3);box-shadow:0 -2px 10px 0 rgba(0,0,0,0.3);margin:8px 0 0;padding:0 0 0 8px}span.userParaName{font-weight:700;cursor:pointer;margin:2px 0 0 5px;padding:0}p#usersPara{font-size:18px;text-align:center;word-wrap:break-word;margin:8px 3px 3px;padding:0}p#waitlistPara{font-size:16px;text-align:center;word-wrap:break-word;margin:3px;padding:0}div#userlistGlobal{font-size:14px;width:160px;text-align:center;cursor:pointer;background-color:#42a5dc;border-radius:5px;height:16px;line-height:16px;border-color:#000;border-style:solid;border-width:1px;margin:4px 4px 4px 19px;padding:0}div#userlistHide{position:relative;display:inline-block;left:97px;background-color:#999;height:35px!important;width:35px!important;cursor:pointer}span#userlistHeaderText{position:relative;bottom:8px}img.imageSpan{margin:0 0 0 5px;padding:0}");$("head").append(a);a=$("<div>");a.attr("id","reload-userlist");var b=$("<div>");b.attr("id","userlistHeader");var d=$("<span>");d.html("User List").attr("id","userlistHeaderText");var c=$("<div>");c.attr("id","userlistHide");var e=$("<p>");e.html(" users in room").attr("id","usersPara");var g=$("<p>");g.html("Waitlist: ").attr("id","waitlistPara");var f=$("<div>");f.html("Userlist: Room").attr("id","userlistGlobal").attr("class","ulButton").attr("title","Toggles the userlist between global and room setting.");var h=$("<div>");h.attr("id","userlistDiv");b.append(d).append(c);a.append(b).append(e).append(g).append(f).append(h);$("body").append(a)}function colorUserlist(){for(var a=API.getUsers(),b,d=0;d<a.length;d++){var c=a[d].username+"Entry";switch(a[d].vote){case 1:b="#408d0d";break;case 0:b="#222";break;case -1:b="red";break;default:b="#222"}c=document.getElementById(c);$(c).css("color",b)}}function updateParagraphs(){users=API.getWaitList();for(var a=API.getUser().id,b=!1,d,c=0;c<users.length;c++)a===users[c].id&&(b=!0,d=c+1);b?$("#waitlistPara").html("Waitlist: "+d+" / "+users.length):$("#waitlistPara").html("Waitlist: "+users.length)}function updateUserlist(){var a=API.getUsers();$("#userlistDiv").html("");$("#usersPara").html(a.length+" users in room");for(var b=0;b<a.length;b++){var d=$("<p>"),c=$("<span>"),e=$("<img>"),g=$("<span>"),f=$("<img>");g.html(a[b].username).attr("id",a[b].username+"Entry").attr("class","userParaName");d.attr("class","userlistParagraph");switch(a[b].permission){case 1:e.attr("src","http://i.imgur.com/nohDf9l.png").attr("class","imageSpan");break;case 2:e.attr("src","http://i.imgur.com/bW75HNL.png").attr("class","imageSpan");break;case 3:e.attr("src","http://i.imgur.com/PpHziJF.png").attr("class","imageSpan");break;case 4:e.attr("src","http://i.imgur.com/mTLOMEi.png").attr("class","imageSpan");break;case 5:e.attr("src","http://i.imgur.com/1gS3StB.png").attr("class","imageSpan");break;case 9:e.attr("src","http://i.imgur.com/gEMSNwG.png").attr("class","imageSpan");break;case 10:e.attr("src","http://i.imgur.com/KkElZ14.png").attr("class","imageSpan")}0<a[b].permission&&c.append(e);!1!=a[b].curated?(f.attr("src","http://i.imgur.com/mYOM9qa.png").attr("class","imageSpan").attr("id","curateImage"),c.append(f)):f.remove();c.attr("id",a[b].username+"Span").append(g);d.append(c);$("#userlistDiv").append(d)}a=$(window).height();a*=0.99;$("#userlistDiv").css("height",a-117+"px");colorUserlist();updateParagraphs()}$(".userParaName").live("click",function(){var a=$("#chat-input-field").val();$("#chat-input-field").val(a+"@"+$(this).html()+" ").focus()});$("#userlistHide").live("click",function(){reload.options.userlistShown=!1;$("#reload-userlist").animate({left:"-250px"},800,function(){})});$(window).resize(function(){var a=$(window).height(),a=0.99*a;$("#userlistDiv").css("height",a-117+"px")});initialize();updateUserlist();
